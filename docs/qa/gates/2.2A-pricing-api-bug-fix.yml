schema: 1
story: "2.2A"
story_title: "Pricing API 단위 변환 및 에러 처리 버그 수정"
gate: "CONCERNS"
status_reason: "UI 안정화 및 onPriceChange 반복 억제로 로그 폭주 해소. 검증 실패 400 정렬 확인. 테스트 하네스 정렬, 배치 경로, 성능/6재료 통합 검증 후 PASS 재평가 권고."
reviewer: "Quinn (Test Architect)"
updated: "2025-10-10T12:00:00Z"
waiver: { active: false }
top_issues:
  - id: "TEST-2.2A-001"
    severity: medium
    finding: "검증 실패 시 500을 기대하는 기존 테스트와 구현의 4xx(VALIDATION_FAILED) 응답 의도 불일치"
    suggested_action: "테스트를 422(또는 400) 기대로 정렬하고 NextResponse 모킹을 표준화"
  - id: "TEST-2.2A-002"
    severity: low
    finding: "NextResponse/Headers 모킹 불완전으로 헤더 설정 시 예외 위험"
    suggested_action: "NextResponse.json과 headers.set을 지원하는 모킹으로 통일"
risk_summary:
  totals: { critical: 0, high: 0, medium: 1, low: 1 }
  recommendations:
    must_fix:
      - "VALIDATION_FAILED 상태코드(4xx) 테스트 기대 정렬 및 배치 경로 검증 추가"
    monitor:
      - "성능(<500ms), 6종 재료 경로, 브라우저 콘솔 에러 무검증 영역 추적"

# 1.2E 실행 로그 테이블 스냅샷 (제안)

본 문서는 마이그레이션 실행 이력 표준화를 위한 테이블 스키마와 예시 레코드를 제시합니다. 실제 DB 반영은 운영 승인 후 적용합니다.

## 스키마 제안 (PostgreSQL)

```sql
CREATE TABLE IF NOT EXISTS public.migration_run_logs (
  run_id TEXT PRIMARY KEY,
  scope TEXT NOT NULL,         -- e.g., 'user_profiles-full-scan'
  mode TEXT NOT NULL,          -- 'dry-run' | 'execute'
  started_at TIMESTAMPTZ NOT NULL DEFAULT now(),
  finished_at TIMESTAMPTZ,
  status TEXT NOT NULL,        -- 'OK' | 'ERROR'
  created_count INTEGER NOT NULL DEFAULT 0,
  skipped_count INTEGER NOT NULL DEFAULT 0,
  missing_count INTEGER NOT NULL DEFAULT 0,
  errors_count INTEGER NOT NULL DEFAULT 0,
  details JSONB DEFAULT '{}'   -- 옵션: 오류/경고/요약 정보
);
```

## 샘플 레코드 (DRY-RUN)

```json
{
  "run_id": "2025-10-13T09:00:00Z-1.2E-dry-run",
  "scope": "user_profiles-full-scan",
  "mode": "dry-run",
  "started_at": "2025-10-13T09:00:00Z",
  "finished_at": "2025-10-13T09:00:05Z",
  "status": "OK",
  "created_count": 0,
  "skipped_count": 1234,
  "missing_count": 0,
  "errors_count": 0,
  "details": { "note": "validation only" }
}
```

